{% extends "base_bootstrap.html" %}
{% load crispy_forms_tags %}

{% block content %}
<br>
<h4>
	<a href="{% url 'catalog:category_detail' category.id%}">
		<i class="fa fa-chevron-circle-left"></i> 
		Volver
	</a>
</h4>

<h1> Agregar / actualizar Atributo </h1>
<em> Nota: al agregar un atributo se eliminar√°n los productos creados </em>
<p>
  <form action="" method="post">
    {% csrf_token %}

    {{ form.non_field_errors }}

    {% for field in form.visible_fields %}
    	{% if field != form.unit and field != form.attribute_type%}
		    <div class="fieldWrapper">
		        {{ field.errors }}
		        {{ field.label_tag }}
		        {{ field }}
		    </div>
		{% endif %}
	{% endfor %}

	<div class="fieldWrapper" id="attribute_type">
		{{ form.attribute_type.label_tag }}
		{{ form.attribute_type }}
		{{ form.attribute_type.errors }}
	</div>

	<div class="fieldWrapper" id="unit" style="display:none">
		{{ form.unit.label_tag }}
		{{ form.unit }}
		{{ form.unit.errors }}
	</div>

    <input type="submit" value="Guardar">
    <input type="submit" value="Cancelar" onclick="window.location.href='{% url 'catalog:category_detail' category.id %}';return false;">
  </form>
</p>


<script type="text/javascript">
	
	function get_attribute_type(){
		field = document.getElementById('id_attribute_type');
		option = field.options[field.selectedIndex];
		x = option.value;
		if(x == "RATIO"){
			document.getElementById('unit').style.display = '';
		}
		else{
			document.getElementById('unit').style.display = 'none';
		}
	}
	get_attribute_type()
	document.getElementById('id_attribute_type').addEventListener('change', get_attribute_type);
</script>
{% endblock %}